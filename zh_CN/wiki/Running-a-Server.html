<!DOCTYPE html><!--[if IE 9]><html class="ie9"><![endif]--><html lang="zh_CN"><head><title>运行服务器 – Jamulus 网站</title><meta charset="utf-8"/><link rel="alternate" hreflang="en" href="https://jamulus.io/wiki/Running-a-Server"/><link rel="alternate" hreflang="zh_CN" href="https://jamulus.io/zh_CN/wiki/Running-a-Server"/><link rel="alternate" hreflang="nb_NO" href="https://jamulus.io/nb_NO/wiki/Running-a-Server"/><link rel="alternate" hreflang="ko_KR" href="https://jamulus.io/ko_KR/wiki/Running-a-Server"/><link rel="alternate" hreflang="pt_BR" href="https://jamulus.io/pt_BR/wiki/Running-a-Server"/><link rel="alternate" hreflang="nl" href="https://jamulus.io/nl/wiki/Running-a-Server"/><link rel="alternate" hreflang="es" href="https://jamulus.io/es/wiki/Running-a-Server"/><link rel="alternate" hreflang="de" href="https://jamulus.io/de/wiki/Running-a-Server"/><link rel="alternate" hreflang="it" href="https://jamulus.io/it/wiki/Running-a-Server"/><link rel="alternate" hreflang="fr" href="https://jamulus.io/fr/wiki/Running-a-Server"/><link rel="alternate" hreflang="pt" href="https://jamulus.io/pt/wiki/Running-a-Server"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="stylesheet" href="/assets/css/fox.min.css"/><link rel="stylesheet" href="/assets/css/fw.css"/><noscript><link rel="stylesheet" href="/assets/css/noscript.css"/></noscript><meta name="description" content=""><link rel="apple-touch-icon" sizes="57x57" href="/zh_CN/apple-icon-57x57.png"/><link rel="apple-touch-icon" sizes="60x60" href="/zh_CN/apple-icon-60x60.png"/><link rel="apple-touch-icon" sizes="72x72" href="/zh_CN/apple-icon-72x72.png"/><link rel="apple-touch-icon" sizes="76x76" href="/zh_CN/apple-icon-76x76.png"/><link rel="apple-touch-icon" sizes="114x114" href="/zh_CN/apple-icon-114x114.png"/><link rel="apple-touch-icon" sizes="120x120" href="/zh_CN/apple-icon-120x120.png"/><link rel="apple-touch-icon" sizes="144x144" href="/zh_CN/apple-icon-144x144.png"/><link rel="apple-touch-icon" sizes="152x152" href="/zh_CN/apple-icon-152x152.png"/><link rel="apple-touch-icon" sizes="180x180" href="/zh_CN/apple-icon-180x180.png"/><link rel="icon" type="image/png" sizes="192x192" href="/zh_CN/android-icon-192x192.png"/><link rel="icon" type="image/png" sizes="32x32" href="/zh_CN/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/zh_CN/favicon-96x96.png"/><link rel="icon" type="image/png" sizes="16x16" href="/zh_CN/favicon-16x16.png"/><link rel="manifest" href="/manifest.json"/><meta name="msapplication-TileColor" content="#ffffff"/><meta name="msapplication-TileImage" content="/ms-icon-144x144.png"/><meta name="theme-color" content="#ffffff"/><meta name="color-scheme" content="dark light"/><link rel="author" href="/humans.txt"/><script src="/assets/js/nav.js"></script><link rel="stylesheet" href="/assets/css/wiki.css"></head><body class="wikisite"><header class="fx-row fx-row-between-xs fx-text-center"><div class="fx-col fx-text-center"><a href="/zh_CN/"><img alt="杰穆鲁斯图标。链接到主页" width="40" height="40" src="/assets/img/jamulus-icon-2020.svg"/></a></div><div class="fx-col-center-xs fx-txt-right hide-on-dt"><a href="#mnv" onclick="showNav();return false;"><svg role="img" width="20" height="20" aria-labelledby="ntitle" id="navbtn" class="hide-on-dt"><title id="ntitle">打开导航</title><g><rect fill="currentcolor" id="r1" width="100%" height="3" x="0" y="0"/><rect fill="currentcolor" id="r2" width="100%" height="3" x="0" y="8"/><rect fill="currentcolor" id="r3" width="100%" height="3" x="0" y="16"/></g></svg></a></div></header><div class="fx-row fx-row-center-xs"><aside id="gnav" class="fx-col-100-xs fx-col-25-m"><div id="langselect"><div lang="en" id="suglang">This site might also be available in your native language. Select your preferred language below:</div><ul><li><a href=" /wiki/Running-a-Server" data-slang="en">en</a></li><li class="selected" data-slang="zh_CN">zh_CN</li><li><a href="/nb_NO/wiki/Running-a-Server" data-slang="nb_NO">nb_NO</a></li><li><a href="/ko_KR/wiki/Running-a-Server" data-slang="ko_KR">ko_KR</a></li><li><a href="/pt_BR/wiki/Running-a-Server" data-slang="pt_BR">pt_BR</a></li><li><a href="/nl/wiki/Running-a-Server" data-slang="nl">nl</a></li><li><a href="/es/wiki/Running-a-Server" data-slang="es">es</a></li><li><a href="/de/wiki/Running-a-Server" data-slang="de">de</a></li><li><a href="/it/wiki/Running-a-Server" data-slang="it">it</a></li><li><a href="/fr/wiki/Running-a-Server" data-slang="fr">fr</a></li><li><a href="/pt/wiki/Running-a-Server" data-slang="pt">pt</a></li></ul></div><nav id="mnv"><ul><li><h3>使用 Jamulus</h3><ul><li><a href="/zh_CN/wiki/Getting-Started" class="">设置</a><ul><li><a href="/zh_CN/wiki/Installation-for-Windows" class="">Windows</a></li><li><a href="/zh_CN/wiki/Installation-for-Macintosh" class="">macOS</a></li><li><a href="/zh_CN/wiki/Installation-for-Linux" class="">Linux</a></li></ul></li><li><a href="/zh_CN/wiki/Software-Manual" class="">用户手册</a></li><li><a href="/zh_CN/wiki/FAQ" class="">常见问题</a></li><li><a href="/zh_CN/wiki/Client-Troubleshooting" class="">故障排除</a></li></ul></li><li><h3>更多</h3><ul><li><a href="/zh_CN/wiki/Running-a-Server" class="selected">服务器管理</a></li><li><a href="/zh_CN/wiki/Tips-Tricks-More" class="">提示和技巧</a></li><li><a href="/zh_CN/kb/index.html" class="">社区知识库</a></li><li><a href="/zh_CN/wiki/Privacy-Statement" class="">隐私声明</a></li></ul></li></ul><div id="cc">This documentation is <a href="https://creativecommons.org/licenses/by-sa/4.0/deed.en">CC BY-SA</a></div></nav></aside><div id="maincontainer" class="fx-col-100-xs fx-col-50-m"><noscript class="red"><strong>您的浏览器禁用了 JavaScript。这完全没问题。该站点旨在提供没有 JS 的基本功能。启用 JavaScript 可能会在本网站上为您提供额外的功能。</strong></noscript><main lang="zh_CN"><h1 class="no_toc" id="服务器管理手册">服务器管理手册</h1><details><summary>目录</summary><ul id="markdown-toc"><li><a href="#我需要运行服务器吗" id="markdown-toc-我需要运行服务器吗">我需要运行服务器吗？</a></li><li><a href="#基本要求" id="markdown-toc-基本要求">基本要求</a><ul><li><a href="#速度和延迟" id="markdown-toc-速度和延迟">速度和延迟</a></li><li><a href="#一般说明" id="markdown-toc-一般说明">一般说明</a></li></ul></li><li><a href="#服务器类型" id="markdown-toc-服务器类型">服务器类型</a><ul><li><a href="#1已注册" id="markdown-toc-1已注册">1.已注册</a></li><li><a href="#2未注册的" id="markdown-toc-2未注册的">2.未注册的</a></li><li><a href="#3-目录" id="markdown-toc-3-目录">3. 目录</a></li></ul></li><li><a href="#安装和配置" id="markdown-toc-安装和配置">安装和配置</a><ul><li><a href="#安装" id="markdown-toc-安装">安装</a></li><li><a href="#配置" id="markdown-toc-配置">配置</a><ul><li><a href="#在已注册模式下运行" id="markdown-toc-在已注册模式下运行">在已注册模式下运行</a></li><li><a href="#作为目录运行" id="markdown-toc-作为目录运行">作为目录运行</a></li></ul></li><li><a href="#维护" id="markdown-toc-维护">维护</a><ul><li><a href="#查看日志" id="markdown-toc-查看日志">查看日志</a></li><li><a href="#控制录音" id="markdown-toc-控制录音">控制录音</a></li></ul></li></ul></li><li><a href="#桌面上的服务器" id="markdown-toc-桌面上的服务器">桌面上的服务器</a></li><li><a href="#服务器设置" id="markdown-toc-服务器设置">服务器设置</a><ul><li><a href="#目录列表" id="markdown-toc-目录列表">目录列表</a></li><li><a href="#我的服务器信息" id="markdown-toc-我的服务器信息">我的服务器信息</a></li><li><a href="#聊天欢迎留言" id="markdown-toc-聊天欢迎留言">聊天欢迎留言</a></li></ul></li><li><a href="#选项" id="markdown-toc-选项">选项</a><ul><li><a href="#录音目录" id="markdown-toc-录音目录">录音目录</a></li><li><a href="#自定义目录地址" id="markdown-toc-自定义目录地址">自定义目录地址</a></li><li><a href="#服务器列表文件名" id="markdown-toc-服务器列表文件名">服务器列表文件名</a></li><li><a href="#延迟平移" id="markdown-toc-延迟平移">延迟平移</a></li><li><a href="#开始最小化" id="markdown-toc-开始最小化">开始最小化</a></li><li><a href="#服务器状态图标" id="markdown-toc-服务器状态图标">服务器状态图标</a></li></ul></li><li><a href="#命令行选项" id="markdown-toc-命令行选项">命令行选项</a></li><li><a href="#运行未注册的服务器" id="markdown-toc-运行未注册的服务器">运行未注册的服务器</a><ul><li><a href="#在家庭路由器后面设置服务器" id="markdown-toc-在家庭路由器后面设置服务器">在家庭路由器后面设置服务器</a><ul><li><a href="#转发端口" id="markdown-toc-转发端口">转发端口</a></li><li><a href="#获取外部-ip" id="markdown-toc-获取外部-ip">获取外部 IP</a></li><li><a href="#动态-dns-以及您可能需要它的原因" id="markdown-toc-动态-dns-以及您可能需要它的原因">动态 DNS 以及您可能需要它的原因</a></li></ul></li></ul></li><li><a href="#备份服务器" id="markdown-toc-备份服务器">备份服务器</a></li><li><a href="#故障排除" id="markdown-toc-故障排除">故障排除</a></li></ul></details><h2 id="我需要运行服务器吗">我需要运行服务器吗？</h2><p><strong>不</strong>。您可以使用内置目录列出的服务器并使用 Jamulus，而无需运行服务器或选择第三方托管服务。如果您只想要一个不受干扰的会话，请使用 <a href="Tips-Tricks-More#在任何服务器上都有一个不受干扰的会话">提示和技巧页面上描述的独奏技术</a>。如果您决定不能使用内置目录列出的任何服务器，您可以使用由托管的服务器（在自定义目录中注册或未注册 - 请参阅 <a href="#服务器类型">服务器类型</a> 第三方。这样做可以省去您自己设置的麻烦。</p><h2 id="基本要求">基本要求</h2><p>虽然设置服务器并不困难，但最好阅读以下背景信息以避免一些问题:</p><h3 id="速度和延迟">速度和延迟</h3><p><strong><em>服务器本身的能力（以及它所在的网络）不是 Jamulus 会话质量的主要决定因素！</em></strong></p><p>通常，问题在 <em>Client</em> 端，应该在那里解决。如果需要，请查看 <a href="/zh_CN/wiki/Client-Troubleshooting">疑难解答页面</a>。</p><p>但是，在设置服务器时也会出现各种问题——尤其是在低带宽家庭连接上运行时。在较慢的家庭连接（例如 10 Mbit/s 下行和 1 Mbit/s 上行）上拥有少于 5 个玩家通常是可以的。您可以在 <a href="Server-Bandwidth">这里的不同质量设置</a> 阅读有关网络要求的更多信息。</p><p>如果您遇到问题，请考虑使用云主机而不是您的家庭互联网连接来获得更好的 ping 时间。</p><h3 id="一般说明">一般说明</h3><ul><li>任何服务器都应具有至少 1.6GHz 的 CPU 频率和 1GB 的 RAM</li><li>运行服务器可能需要您调整在您的机器或云主机之上或之外运行的任何防火墙。</li><li>在家里运行未注册的服务器将需要您在路由器上进行 <a href="#转发端口">端口转发</a>。在运行注册服务器时，在大多数情况下不需要端口转发，但建议这样做，因为某些网络在 Jamulus 的默认模式下可能无法正常工作。</li><li>Jamulus 只有有限的 IPv6 支持，需要在客户端和服务器上使用命令行参数启用。 （有计划扩展 IPv6 支持。）</li></ul><h2 id="服务器类型">服务器类型</h2><p>您可以以不同的方式运行您的服务器（在家或在第 3 方主机上）:</p><h3 id="1已注册">1.已注册</h3><p>您的服务器将列在目录中。默认情况下，Jamulus 有一个客户端可以连接的内置目录列表。如果您注册其中之一，那么任何人都可以发现并连接到您的服务器。如果更符合您的需求，您还可以将您的服务器列在自定义目录中。</p><figure><img src="https://user-images.githubusercontent.com/4561747/147834923-803ba3f9-c3a3-4c6a-90a4-fdbe5e950244.png " loading="lazy" alt="Jamulus 注册服务器中客户端之间的连接图"/><figcaption>注册服务器的工作原理</figcaption></figure><h3 id="2未注册的">2.未注册的</h3><p>这是第一次启动服务器时的默认设置。未注册的服务器不在目录中列出，因此只有知道您的服务器地址的音乐家才能连接到它。这很有用，因为 Jamulus 不允许您控制谁可以连接到服务器。</p><figure><img src="https://user-images.githubusercontent.com/4561747/147834838-c0c12d93-9bee-435d-8b4e-dcb006f86d20.png " loading="lazy" alt="Jamulus 未注册服务器中客户端之间的连接图"/><figcaption>未注册服务器的工作原理</figcaption></figure><p>如果您在家庭互联网连接后面运行未注册的服务器，您可能需要启用 <a href="#转发端口">端口转发</a>，如下所述。</p><h3 id="3-目录">3. 目录</h3><p>如果您想运行多个服务器，也可能在防火墙后面或 LAN 上，您可能希望将您的服务器作为目录运行。示例包括在线活动、音乐协会、部分排练或学校的音乐课。</p><p>运行目录 <a href="Directories">阅读本指南</a></p><h2 id="安装和配置">安装和配置</h2><p>大多数人在运行 Linux 的<strong>没有音频的硬件</strong>（例如，在第 3 方/云主机上）上将 Jamulus 作为“纯”服务器运行。以下步骤假设您熟悉命令行和 Debian/Ubuntu 或使用 systemd 的类似发行版。要在 Windows 或具有图形用户界面的桌面上运行服务器，<a href="#桌面上的服务器">请参阅本节</a>。</p><p>如果您想在 Raspberry Pi（或其他基于 armhf/arm64 debian 的设备）上运行服务器，您需要下载 32 位 <code class="language-plaintext highlighter-rouge">armhf</code> 或 64 位 <code class="language-plaintext highlighter-rouge">arm64</code> 的 <code class="language-plaintext highlighter-rouge">.deb</code> 文件，而不是您将在基于 Intel/AMD 的机器上使用的默认 <code class="language-plaintext highlighter-rouge">amd64</code>。</p><h3 id="安装">安装</h3><ol><li>下载 <a href="https://github.com/jamulussoftware/jamulus/releases/download/r3_9_1/jamulus-headless_3.9.1_ubuntu_amd64.deb">最新的 headless (amd64).deb 文件</a> 或者，如果您使用 Raspberry Pi 等，请下载 <a href="https://github.com/jamulussoftware/jamulus/releases/download/r3_9_1/jamulus-headless_3.9.1_ubuntu_armhf.deb">最新的 armhf.deb 文件</a> 或 <a href="https://github.com/jamulussoftware/jamulus/releases/download/r3_9_1/jamulus-headless_3.9.1_ubuntu_arm64.deb">最新的 arm64.deb 文件</a></li><li>更新 apt 以确保您拥有最新的标准软件包列表:<code class="language-plaintext highlighter-rouge">sudo apt update</code></li><li>安装 Jamulus 软件包:<code class="language-plaintext highlighter-rouge">sudo apt install ./jamulus-headless_3.9.1_ubuntu_amd64.deb</code> 或用于 RasPi 等 armhf:<code class="language-plaintext highlighter-rouge">sudo apt install ./jamulus-headless_3.9.1_ubuntu_armhf.deb</code> ; arm64:<code class="language-plaintext highlighter-rouge">sudo apt install ./jamulus-headless_3.9.1_ubuntu_arm64.deb</code></li><li>通过 systemd 启用 headless 服务器进程:<code class="language-plaintext highlighter-rouge">sudo systemctl enable jamulus-headless</code></li><li>通过运行 <code class="language-plaintext highlighter-rouge">sudo systemctl edit --full jamulus-headless</code> 将所需的 <a href="Running-a-Server#命令行选项">命令行选项</a> 添加到 systemd 服务文件中的 <code class="language-plaintext highlighter-rouge">ExecStart</code> 行（默认情况下，您将正在运行未注册的服务器）。</li><li>重新加载 systemd 文件 <code class="language-plaintext highlighter-rouge">sudo systemctl daemon-reload</code> 并重新启动 headless 服务器:<code class="language-plaintext highlighter-rouge">sudo systemctl restart jamulus-headless</code></li><li>使用 <code class="language-plaintext highlighter-rouge">systemctl status jamulus-headless</code> 检查一切是否正常（点击 <code class="language-plaintext highlighter-rouge">q</code> 返回命令提示符）。</li></ol><p>您可以使用 <code class="language-plaintext highlighter-rouge">systemctl</code> 命令控制 Jamulus。例如，干净地停止服务器:</p><p><code class="language-plaintext highlighter-rouge">sudo systemctl stop jamulus-headless</code></p><p><em>要升级您的服务器，只需重复上述步骤即可。</em></p><h3 id="配置">配置</h3><h4 id="在已注册模式下运行">在已注册模式下运行</h4><p><a href="Running-a-Server#服务器类型">运行已注册的服务器</a>需要以下最低设置:</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>jamulus --nogui --server \
        --directoryserver genreServer:port \
        --serverinfo "yourServerName;yourCity;[country ID]"
</code></pre></div></div><p><strong>注意</strong>:在 <code class="language-plaintext highlighter-rouge">--serverinfo</code> 参数中的 <code class="language-plaintext highlighter-rouge">yourServerName</code> 和 <code class="language-plaintext highlighter-rouge">yourCity</code> 中不允许使用分号和换行符</p><p>要注册到 Jamulus 客户端内置的目录之一，请将上面示例中的 <code class="language-plaintext highlighter-rouge">genreServer:port</code> 替换为以下选项之一:</p><table><thead><tr><th>类型</th><th>服务器地址</th><th> </th></tr></thead><tbody><tr><td><strong>任何体裁1</strong></td><td><code class="language-plaintext highlighter-rouge">anygenre1.jamulus.io:22124</code></td><td> </td></tr><tr><td><strong>任何体裁2</strong></td><td><code class="language-plaintext highlighter-rouge">anygenre2.jamulus.io:22224</code></td><td> </td></tr><tr><td><strong>任何流派3</strong></td><td><code class="language-plaintext highlighter-rouge">anygenre3.jamulus.io:22624</code></td><td> </td></tr><tr><td><strong>流派摇滚</strong></td><td><code class="language-plaintext highlighter-rouge">rock.jamulus.io:22424</code></td><td> </td></tr><tr><td><strong>*类型的爵士乐</strong></td><td><code class="language-plaintext highlighter-rouge">jazz.jamulus.io:22324</code></td><td> </td></tr><tr><td><strong>类古典/民谣</strong></td><td><code class="language-plaintext highlighter-rouge">classical.jamulus.io:22524</code></td><td> </td></tr><tr><td><strong>类合唱/理发店</strong></td><td><code class="language-plaintext highlighter-rouge">choral.jamulus.io:22724</code></td><td> </td></tr></tbody></table><p>你也可以在命令行中以同样的方式指定一个<a href="#3-目录">目录</a>，提供相同格式的服务器地址。</p><h4 id="作为目录运行">作为目录运行</h4><p>如果您想运行 <a href="Running-a-Server#3-目录">目录</a>，请参阅 <a href="Directories">指南</a>。</p><h3 id="维护">维护</h3><h4 id="查看日志">查看日志</h4><p>如果您将 <code class="language-plaintext highlighter-rouge">StandardOutput=journal</code> 设置留在单元文件中，Jamulus 将记录到系统日志文件。</p><p>要查看日志，请使用 <code class="language-plaintext highlighter-rouge">journalctl</code>（退出按 Ctrl-C）。例如，读取系统日志文件，为 Jamulus 服务过滤:</p><p><code class="language-plaintext highlighter-rouge">journalctl -f -u jamulus-headless</code></p><h4 id="控制录音">控制录音</h4><p>当使用带有<code class="language-plaintext highlighter-rouge">-R</code>命令行选项的录制功能时，如果服务器在录制过程中收到 SIGUSR1 信号，它将在新目录中开始新的录制。 SIGUSR2 将开启/关闭录制功能。</p><p>要使用 systemd 发送这些信号，请在 <code class="language-plaintext highlighter-rouge">/etc/systemd/system</code> 中创建以下两个 <code class="language-plaintext highlighter-rouge">.service</code> 文件，将它们命名为适当的名称（例如 <code class="language-plaintext highlighter-rouge">jamulusTogglerec.service</code>）。</p><p><strong>注意</strong>: 您需要将记录保存到 jamulus 主目录的 <em>outside</em> 路径，或从 systemd 单元文件中删除 <code class="language-plaintext highlighter-rouge">ProtectHome=true</code>（但请注意，这样做存在潜在的安全风险）。</p><p>打开或关闭录制（取决于当前状态）:</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> [Unit]
 Description=Toggle recording state of Jamulus Server
 Requisite=Jamulus-Server

 [Service]
 Type=oneshot
 ExecStart=/bin/systemctl kill -s SIGUSR2 Jamulus-Server
</code></pre></div></div><p>开始新的录音:</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> [Unit]
 Description=Start a new recording on Jamulus Server
 Requisite=Jamulus-Server

 [Service]
 Type=oneshot
 ExecStart=/bin/systemctl kill -s SIGUSR1 Jamulus-Server
</code></pre></div></div><p><em>注意:<code class="language-plaintext highlighter-rouge">ExecStart</code> 行中的 Jamulus 服务名称需要与您在设置 systemd 以控制您的 Jamulus 服务器时创建的 <code class="language-plaintext highlighter-rouge">.service</code> 文件名相同。所以在这个例子中它将是<code class="language-plaintext highlighter-rouge">Jamulus-Server.service</code></em></p><p>运行 <code class="language-plaintext highlighter-rouge">sudo systemctl daemon-reload</code> 以注册它们以供首次使用。</p><p>现在您可以使用 <code class="language-plaintext highlighter-rouge">systemctl</code> 命令运行这些命令，例如:</p><p><code class="language-plaintext highlighter-rouge">sudo systemctl start jamulusTogglerec</code> (假设你将你的单元文件命名为<code class="language-plaintext highlighter-rouge">jamulusTogglerec.service</code>)</p><p>如果您运行 <code class="language-plaintext highlighter-rouge">systemctl status jamulus</code>，或者通过查看日志，您可以看到这些命令的结果。</p><h2 id="桌面上的服务器">桌面上的服务器</h2><p>Jamulus 可以从桌面以服务器模式运行。这为您提供了一个图形用户界面来控制大多数设置。</p><ul><li><strong>Windows 用户</strong> - 使用 Windows 开始菜单中的“Jamulus Server”图标。</li><li><strong>macOS 用户</strong> - 双击应用程序中的 “Jamulus Server” 图标（假设您按照 [这些说明]（Macintosh 安装）将安装中的文件放在那里）。</li><li><strong>Linux 用户</strong> - 启动“Jamulus 服务器”快捷方式。或者你可以打开一个终端窗口（Debian 和相关发行版上的<code class="language-plaintext highlighter-rouge">CTRL+ALT+t</code>），输入<code class="language-plaintext highlighter-rouge">jamulus -s</code> 然后回车。</li></ul><h2 id="服务器设置">服务器设置</h2><figure><img src="https://user-images.githubusercontent.com/4561747/178142684-1b85e654-78be-4909-a76c-945d7a0f7ccc.png " style="width:80%; border:5px solid grey;" loading="lazy" alt="Jamulus 服务器设置窗口的图片"/></figure><h3 id="目录列表">目录列表</h3><p><strong>无</strong>:默认情况下，您不会连接到目录，而是在未注册模式下运行。 <a href="#运行未注册的服务器">阅读这些说明</a> 让其他人以这种模式连接到您的服务器。</p><p><strong>流派</strong>:要允许其他人在客户端内置的目录之一上看到您的服务器，请选择所需的流派目录。您应该会看到一条确认消息，说明您的服务器是否已成功注册。如果没有，并且您让服务器保持运行状态，它将继续尝试注册，直到有空闲插槽可用。</p><p><strong>自定义</strong>:这允许您指定要在其上列出的自定义目录。请参阅您要使用的自定义目录地址的“选项”选项卡。</p><p>要运行您的服务器 <em>as</em> 目录，您需要将自定义目录地址设置为 <code class="language-plaintext highlighter-rouge">localhost</code> 或 <code class="language-plaintext highlighter-rouge">127.0.0.1</code> 并将“流派”设置为“自定义”。 [阅读本指南]（目录）了解更多详情。</p><h3 id="我的服务器信息">我的服务器信息</h3><p>当作为注册服务器运行时，它会显示服务器的名称、地区和国家，以便其他用户可以在目录列表中轻松识别它。</p><h3 id="聊天欢迎留言">聊天欢迎留言</h3><p>当所有用户加入服务器时，此处输入的文本会显示给所有用户（聊天窗口将自动为他们打开）。还支持 HTML。</p><h2 id="选项">选项</h2><figure><img src="https://user-images.githubusercontent.com/4561747/178142687-da256fa5-d7b8-47ab-9265-63c3c9760841.png " style="width:80%; border:5px solid grey;" loading="lazy" alt="Jamulus 服务器设置窗口的图片"/></figure><h3 id="录音目录">录音目录</h3><p>这设置了服务器的录音将被存储的路径。有了这个路径设置，服务器设置选项卡中的 “启用乐队录音机 “功能将使录音在第一个人连接到服务器时开始，并在最后一个人离开时停止。使用 “新建录音 “按钮，创建一个新的子目录，从那时起，录音将被存储在该目录中。请注意，录音是以<a href="https://www.audacityteam.org/">Audacity</a><code class="language-plaintext highlighter-rouge">.lof</code>格式和<a href="https://en.wikipedia.org/wiki/REAPER">REAPER</a><code class="language-plaintext highlighter-rouge">.rpp</code>格式的每一轨。打开相应的文件，在这些应用程序中聆听它们。</p><p><strong>注意</strong>:当您的服务器正在录制时，客户端会显示一条消息，表明正在录制。</p><h3 id="自定义目录地址">自定义目录地址</h3><p>将此字段留空，除非您需要在 <a href="#3-目录">自定义目录</a> 上列出您的服务器或运行目录。</p><h3 id="服务器列表文件名">服务器列表文件名</h3><p>将此字段留空，除非您需要将服务器作为 <a href="#3-目录">Directory</a>运行。使用时，它会在重新启动目录时保存已注册服务器的列表。这可以防止服务器列表在服务器重新注册之前显示为“空”。</p><h3 id="延迟平移">延迟平移</h3><p>此选项使用两只耳朵之间声音到达时间的微小差异。与正常的“音量”平移相比，它产生类似于自然人类听觉的立体声效果。</p><h3 id="开始最小化">开始最小化</h3><p><strong>Windows 用户</strong> - 如果希望服务器在系统启动时自动启动，请启用相应的复选框。</p><h3 id="服务器状态图标">服务器状态图标</h3><p>当服务器运行时，操作系统会在系统托盘或状态区显示一个图标来表示服务器是否处于活动状态:</p><figure><img src="https://raw.githubusercontent.com/jamulussoftware/jamulus/main/src/res/servertrayiconinactive.png " style="float:left; margin-right:10px;" loading="lazy" alt="Jamulus 服务器图标的图片"/></figure><p>服务器为空</p><figure><img src="https://raw.githubusercontent.com/jamulussoftware/jamulus/main/src/res/servertrayiconactive.png " style="float:left; margin-right:10px;" loading="lazy" alt="Jamulus 服务器图标图片"/></figure><p>服务器被占用</p><h2 id="命令行选项">命令行选项</h2><p>Jamulus 中最常见的功能可以使用 GUI 设置，但这些和其他功能也可以使用终端窗口中给出的选项进行设置。具体如何执行此操作将取决于您的操作系统。</p><p>例如在 Windows 上，要使用特定的设置文件，请右键单击 Jamulus 快捷方式并选择“属性”&gt;“目标”。将必要的参数添加到 Jamulus.exe:</p><div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="s2">"C:</span><span class="se">\P</span><span class="s2">rogram Files</span><span class="se">\J</span><span class="s2">amulus</span><span class="se">\J</span><span class="s2">amulus.exe"</span> <span class="nt">--serverbindip</span> 192.168.0.100
</code></pre></div></div><p>对于 macOS，启动终端窗口并使用所需的选项运行 Jamulus，如下所示:</p><div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code> /Applications/Jamulus.app/Contents/MacOS/Jamulus <span class="nt">--serverbindip</span> 192.168.0.100
</code></pre></div></div><p><strong>注意</strong>:命令行选项将在启动时设置服务器的默认值。您可以在服务器运行时使用相应的 GUI 控件覆盖它们。</p><ul><li><code class="language-plaintext highlighter-rouge">-d</code> 或 <code class="language-plaintext highlighter-rouge">--discononquit</code> 在退出时断开所有客户端的连接。通常，当服务器停止或重新启动时，任何未使用“断开连接”按钮的客户端将在服务器再次恢复时重新建立连接。使用此选项会强制客户端手动重新建立与服务器的连接。</li><li><code class="language-plaintext highlighter-rouge">-e</code> 或 <code class="language-plaintext highlighter-rouge">--directoryserver</code> 在目录上注册服务器（例如，设置其流派（另见 <code class="language-plaintext highlighter-rouge">-o</code>））。有关详细信息，请参阅 <a href="Running-a-Server#服务器类型">服务器类型</a>。</li><li><code class="language-plaintext highlighter-rouge">--directoryfile</code> 即使目录重新启动，也要记住注册的服务器。仅限目录服务器。有关详细信息，请参阅 <a href="Directories">本指南</a>。</li><li><code class="language-plaintext highlighter-rouge">-f</code> 或 <code class="language-plaintext highlighter-rouge">--listfilter</code> 白名单服务器列表中注册的服务器，格式为 ` ip address 1[;ip address 2]`仅目录。</li><li><code class="language-plaintext highlighter-rouge">-F</code> 或 <code class="language-plaintext highlighter-rouge">--fastupdate</code> 如果客户端使用“启用小型网络缓冲区”选项连接，则减少延迟。需要更快的 CPU 以避免丢失，并为启用的客户端提供更多带宽。</li><li><code class="language-plaintext highlighter-rouge">-l</code> 或 <code class="language-plaintext highlighter-rouge">--log</code> 启用日志记录，设置路径和文件名</li><li><code class="language-plaintext highlighter-rouge">-L</code> 或 <code class="language-plaintext highlighter-rouge">--licence</code> 在用户连接之前显示一个协议窗口</li><li><code class="language-plaintext highlighter-rouge">-m</code> 或 <code class="language-plaintext highlighter-rouge">--htmlstatus</code> 启用 HTML 状态文件，设置路径和文件名</li><li><code class="language-plaintext highlighter-rouge">-o</code> 或 <code class="language-plaintext highlighter-rouge">--serverinfo</code> 位置详细信息，格式为:<code class="language-plaintext highlighter-rouge">[name];[city];[country as two-letter ISO country code or Qt5 Locale]</code>（参见 <a href="https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2#Officially_assigned_code_elements">two-letter ISO country codes</a> 或 <a href="https://doc.qt.io/qt-5/qlocale.html#Country-enum">Qt5 语言环境值</a>)仅限注册服务器</li><li><code class="language-plaintext highlighter-rouge">-P</code> 或 <code class="language-plaintext highlighter-rouge">--delaypan</code> 开始时启用延迟平移参见 <a href="Running-a-Server#延迟平移">notes</a></li><li><code class="language-plaintext highlighter-rouge">-R</code> 或 <code class="language-plaintext highlighter-rouge">--recording</code> 设置服务器录音目录;默认情况下，服务器将记录会话何时处于活动状态。请参阅 <a href="Running-a-Server#选项">选项</a>。</li><li><code class="language-plaintext highlighter-rouge">--norecord</code> 设置服务器默认不记录（当配置记录时，例如通过<code class="language-plaintext highlighter-rouge">-R</code>）</li><li><code class="language-plaintext highlighter-rouge">-s</code> 或 <code class="language-plaintext highlighter-rouge">--server</code> 以服务器模式启动</li><li><code class="language-plaintext highlighter-rouge">--serverbindip</code> 指定要绑定的 IP 地址</li><li><code class="language-plaintext highlighter-rouge">-T</code> 或 <code class="language-plaintext highlighter-rouge">--multithreading</code> 使用多线程更好地利用多核 CPU 来支持更多的客户端</li><li><code class="language-plaintext highlighter-rouge">-u</code>或<code class="language-plaintext highlighter-rouge"> --numchannels</code> 最大通道数（客户端）</li><li><code class="language-plaintext highlighter-rouge">-w</code> 或 <code class="language-plaintext highlighter-rouge">--welcomemessage</code> 连接时的欢迎消息。可以作为字符串或文件名给出，并且可以包含 HTML。</li><li><code class="language-plaintext highlighter-rouge">-z</code> 或 <code class="language-plaintext highlighter-rouge">--startminimized</code> 开始最小化</li><li><code class="language-plaintext highlighter-rouge">--serverpublicip</code> 如果连接到同一 NAT 后面的目录，则服务器的公共 IP 地址。参见<a href="Directories#关于目录的注意事项">目录注释</a></li></ul><ul><li><code class="language-plaintext highlighter-rouge">-h</code> 者 <code class="language-plaintext highlighter-rouge">--help</code> 显示帮助文本</li><li><code class="language-plaintext highlighter-rouge">-i</code> 或 <code class="language-plaintext highlighter-rouge">--inifile</code> 设置初始化文件的位置（覆盖默认值）</li><li><code class="language-plaintext highlighter-rouge">-n</code> 或 <code class="language-plaintext highlighter-rouge">--nogui</code> 禁用 GUI（用于 headless 模式）</li><li><code class="language-plaintext highlighter-rouge">-p</code> 或 <code class="language-plaintext highlighter-rouge">--port</code> 设置本地 UDP 端口号。默认为 22124</li><li><code class="language-plaintext highlighter-rouge">--jsonrpcport</code> 启用 JSON-RPC API 服务器来控制应用程序，设置 TCP 端口号（实验性，API 可能会更改;只能从 localhost 访问）。请参阅 <a href="https://github.com/jamulussoftware/jamulus/blob/main/docs/JSON-RPC.md">JSON-RPC API 文档文件</a>。</li><li><code class="language-plaintext highlighter-rouge">--jsonrpcsecretfile</code> 使用 <code class="language-plaintext highlighter-rouge">--jsonrpcport</code> 时需要。设置包含用于访问 JSON-RPC API 的身份验证字符串的文本文件的路径。</li><li><code class="language-plaintext highlighter-rouge">-Q</code> 或 <code class="language-plaintext highlighter-rouge">--qos</code> 设置服务质量 DS 字段字节。默认值为 128 (DSCP/CS4)。 QoS 被 Windows 忽略。要启用它，<a href="QOS-Windows">查看此页面</a></li><li><code class="language-plaintext highlighter-rouge">-t</code> 或 <code class="language-plaintext highlighter-rouge">--notranslation</code> 禁用 UI 语言翻译</li><li><code class="language-plaintext highlighter-rouge">-6</code> 或 <code class="language-plaintext highlighter-rouge">--enableipv6</code> 启用 IPv6 寻址（始终启用 IPv4）</li><li><code class="language-plaintext highlighter-rouge">-v</code> 或 <code class="language-plaintext highlighter-rouge">--version</code> 输出版本信息并退出</li></ul><h2 id="运行未注册的服务器">运行未注册的服务器</h2><p>强烈建议您<strong>首先</strong>在内置目录之一上注册您的服务器来测试您的服务器，以缩小未注册模式下的任何后续问题。</p><h3 id="在家庭路由器后面设置服务器">在家庭路由器后面设置服务器</h3><p>如果您在家中设置服务器，您可能需要更改路由器/防火墙中的一些设置:</p><h4 id="转发端口">转发端口</h4><p>来自家庭网络外部的人将无法看到其中的内容。要让外部 Jamulus 客户端连接到您的服务器，您需要在路由器的设置中设置端口转发。每个路由器的确切设置都不同。如需帮助，请参阅路由器的文档或 <a href="https://portforward.com">portforward.com</a>。</p><p><strong>注意:</strong> Jamulus 当前版本的默认端口是 <strong>UDP</strong>（不是 TCP）端口 <strong>22124</strong>。您通常会将端口 <strong>22124</strong> 从网络外部转发到运行服务器的机器的端口 <strong>22124</strong>。</p><p><strong>注意:</strong> 您的家庭路由器可能会更改您运行服务器的机器的 IP 地址。根据您的路由器，您可能需要给这台机器一个静态 IP 地址（通常在路由器的 DHCP 设置下）。</p><h4 id="获取外部-ip">获取外部 IP</h4><p>要允许其他人从互联网连接到您的服务器，请获取您的外部（WAN）IP地址，例如通过[使用Google]（https://www.google.com/search?q=what+is+my+ip）并将其提供给他们。 您自己应使用运行服务器的计算机的本地网络 （LAN） 地址进行连接。如果您在与服务器相同的计算机上运行客户端，则为“localhost”或“127.0.0.1”。</p><h4 id="动态-dns-以及您可能需要它的原因">动态 DNS 以及您可能需要它的原因</h4><p>大多数国内互联网连接会在短时间内更改其外部 IP 地址。为避免出现此问题，您可能需要设置“动态 DNS”以获得可以与他人共享的静态（子）域。请研究如何为您的特定设置执行此操作。您的路由器可能支持一些开箱即用的“动态 DNS”提供商。如果不是这种情况，请按照您选择的动态 DNS 提供商的说明设置动态 DNS 客户端。</p><h2 id="备份服务器">备份服务器</h2><p><em>请注意， headless 服务器不使用 <code class="language-plaintext highlighter-rouge">.ini</code> 文件。所有配置都以命令行选项的形式给出。</em></p><p>安装并运行后，您可能需要保留设置的副本。备份总是一个好主意，并且设置文件在 Jamulus 版本之间不向后兼容。所以如果你想回到以前的版本，你需要恢复你的设置。</p><p>要在 Windows 上查找您的设置文件，请在搜索栏中键入“%APPDATA%”并查找名为“Jamulus”的文件夹。此文件夹中将有一个或多个 <code class="language-plaintext highlighter-rouge">.ini</code> 文件。现在备份 Jamulus 的设置。</p><p>对于所有其他平台，请从命令行运行以下命令以查找其所在的位置并将文件复制到其他位置:</p><p><code class="language-plaintext highlighter-rouge">find ~ -name Jamulus.ini -ls</code></p><p>如果您使用 <code class="language-plaintext highlighter-rouge">--inifile</code> 参数将 inifile 保存到其他位置，请不要忘记同时备份这些文件。 <strong>注意事项</strong></p><ul><li>在 Jamulus 运行时不要备份或恢复设置文件。</li><li>不建议手动编辑设置文件（它们不是为此而设计的）。</li><li>您可以通过删除设置文件（关闭 Jamulus 后）将所有设置恢复为默认值。</li></ul><h2 id="故障排除">故障排除</h2><p>如果您遇到其他问题，<a href="Server-Troubleshooting">请参阅本指南</a>。</p></main></div></div><footer class="fx-row fx-row-around-xs" id="footer"><div class="fx-col-100-xs fx-col-33-s fx-col-center-xs"><a href="https://github.com/jamulussoftware/jamulus" target="_blank" rel="noreferrer"><img src="/assets/img/github.svg" alt="Jamulus GitHub 存储库" loading="lazy" class="fx-center"/></a></div><div class="fx-col-100-xs fx-col-33-s fx-col-center-xs"><a href="https://www.facebook.com/groups/619274602254947/" target="_blank" rel="noreferrer"><img src="/assets/img/facebook.svg" alt="Jamulus Facebook 群组" id="fb_icon" loading="lazy" class="fx-center"/></a></div><div class="fx-col-100-xs fx-col-33-s fx-col-center-xs"><a href="https://github.com/jamulussoftware/jamulus/discussions" target="_blank" rel="noreferrer"><img src="/assets/img/forum.svg" alt="帮助和支持" loading="lazy" class="fx-center"/></a></div><div id="copyright" class="fx-col-100-xs fx-row-center-xs"><a href="https://github.com/corrados" target="_blank" rel="noreferrer">Volker Fischer</a> 和 <a href="https://github.com/jamulussoftware/jamulus/graphs/contributors" target="_blank" rel="noreferrer"> 贡献者</a> 的软件 - 想要 <a href="/zh_CN/wiki/Contribution"> 参与吗？</a><div id="asio-footer"> ASIO &reg; compatible - ASIO is a trademark and software of Steinberg Media Technologies GmbH </div></div></footer><script>var ja=window.navigator.language||window.navigator.userLanguage,mu=document.documentElement.lang,lus=["en","zh_CN","nb_NO","ko_KR","pt_BR","nl","es","de","it","fr","pt"],regex=RegExp("^"+mu);regex.test(ja)||lus.forEach(function(e){ja.match("^"+e)&&(document.getElementById("langselect").classList.add("chlang","red"),document.getElementById("suglang").style.display="block",document.querySelectorAll("[data-slang="+e+"]")[0].classList.add("proplang"))});</script></body></html>